# NPanel Backend Environment Configuration
# Copy this file to .env and update values for your environment
# See ENVIRONMENT_CONFIGURATION_GUIDE.md for detailed documentation

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Application environment
# Values: development | production | staging
NODE_ENV=production

# Application port (NestJS app listens on this port)
PORT=3000

# Logging level
# Values: debug | info | warn | error
LOG_LEVEL=info

# Log file path (where application logs are written)
LOG_FILE=/var/log/npanel-backend.log

# CORS origins (comma-separated list of allowed origins)
# Example: http://localhost:3001,https://panel.example.com
NPANEL_CORS_ORIGINS=http://127.0.0.1:3001,http://localhost:3001

# ============================================================================
# DATABASE CONFIGURATION (Using SQLite by default)
# ============================================================================

# Database type (only sqlite supported in current version)
# Note: Database file is: npanel.sqlite (in the backend directory)
# DB_TYPE=sqlite

# ============================================================================
# JWT SECURITY
# ============================================================================

# JWT secret key (used to sign authentication tokens)
# Generate with: openssl rand -hex 32
# REQUIRED - Must be a strong random string
JWT_SECRET=CHANGEME_generate_with_openssl_rand_hex_32

# JWT token expiry time
# Format: NestJS time string (e.g., "24h", "7d", "30m")
JWT_EXPIRY=24h

# ============================================================================
# CREDENTIALS ENCRYPTION
# ============================================================================

# Secret for encrypting stored credentials (optional, falls back to JWT_SECRET)
# If not set, JWT_SECRET is used for encryption
# Generate with: openssl rand -hex 32
# NPANEL_CREDENTIALS_SECRET=CHANGEME_optional_separate_key

# ============================================================================
# TLS/HTTPS CONFIGURATION
# ============================================================================

# Enable TLS/HTTPS support
TLS_ENABLED=true

# Path to TLS certificate file
TLS_CERT_PATH=/etc/ssl/certs/npanel.crt

# Path to TLS private key file
TLS_KEY_PATH=/etc/ssl/private/npanel.key

# ============================================================================
# SYSTEM TOOLS & COMMANDS
# ============================================================================

# Shell to use for command execution
# Default: /bin/sh
SHELL=/bin/sh

# Fixed PATH environment variable for command execution
# If set, overrides system PATH for all command execution
# Example: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
# NPANEL_FIXED_PATH=/custom/path/bin

# Command timeout (milliseconds)
# Maximum time to wait for system commands to complete
NPANEL_CMD_TIMEOUT_MS=60000

# MySQL/MariaDB client command
# Used for database operations via CLI
NPANEL_MYSQL_CMD=mysql

# Rsync command path
# Used for migrations and file transfers
NPANEL_RSYNC_CMD=rsync

# Temporary directory for operations
# Used for migrations, file transfers, etc.
NPANEL_TEMP_DIR=/tmp

# ============================================================================
# HOSTING CONFIGURATION
# ============================================================================

# Default IPv4 address for new accounts
# Can be: IP address (1.2.3.4) or "auto" to detect
NPANEL_HOSTING_DEFAULT_IPV4=auto

# DNS adapter type
# Values: shell (execute system commands) or api (call external API)
NPANEL_HOSTING_DNS_ADAPTER=shell

# Mail service adapter type
# Values: shell (execute system commands) or api (call external API)
NPANEL_HOSTING_MAIL_ADAPTER=shell

# FTP adapter type
# Values: shell (execute system commands) or api (call external API)
NPANEL_HOSTING_FTP_ADAPTER=shell

# Mail service command (when using shell adapter)
NPANEL_MAIL_CMD=exim4

# FTP service command (when using shell adapter)
NPANEL_FTP_CMD=pure-ftpd

# Allowed services to restart via admin API
# Comma-separated list (no spaces)
NPANEL_ALLOWED_RESTART_SERVICES=httpd,nginx,mysql,exim4,pure-ftpd,dovecot,bind9

# ============================================================================
# MIGRATION SETTINGS
# ============================================================================

# Migration target root directory
# Used for remote server migrations
NPANEL_MIGRATION_TARGET_ROOT=/opt/npanel/migrations

# ============================================================================
# DEVELOPMENT SETTINGS (Only for NODE_ENV=development)
# ============================================================================

# Debug mode (enables verbose logging)
# DEBUG=npanel:*

# Database synchronization (auto-update schema)
# Warning: Only use in development!
# DB_SYNCHRONIZE=true

# ============================================================================
# OPTIONAL ADVANCED SETTINGS
# ============================================================================

# Metrics collection (future use)
# NPANEL_METRICS_ENABLED=false

# Audit logging (future use)
# NPANEL_AUDIT_LOG_ENABLED=true

# ============================================================================
# PRODUCTION RECOMMENDATIONS
# ============================================================================
# 
# 1. Change JWT_SECRET:
#    $ openssl rand -hex 32
#    JWT_SECRET=<output_from_above>
#
# 2. Set LOG_LEVEL=warn (production should not log debug info)
#
# 3. Ensure NODE_ENV=production
#
# 4. Use real TLS certificates (not self-signed)
#    TLS_CERT_PATH=/etc/ssl/certs/real-cert.crt
#    TLS_KEY_PATH=/etc/ssl/private/real-key.key
#
# 5. Set strong NPANEL_CREDENTIALS_SECRET if encrypting sensitive data
#
# 6. Limit NPANEL_ALLOWED_RESTART_SERVICES to only required services
#
# 7. Review all NPANEL_* settings for your specific environment
#
# ============================================================================
